/**
 * Modules in this bundle
 * @license
 *
 * lookforward:
 *   license: MIT (http://opensource.org/licenses/MIT)
 *   author: appleple
 *   homepage: http://developer.a-blogcms.jp
 *   version: 1.1.0
 *
 * custom-event-polyfill:
 *   license: MIT (http://opensource.org/licenses/MIT)
 *   maintainers: krambuhl <evan.krambuhl@gmail.com>
 *   contributors: Frank Panetta, Mikhail Reenko <reenko@yandex.ru>, Joscha Feth <joscha@feth.com>
 *   homepage: https://github.com/krambuhl/custom-event-polyfill#readme
 *   version: 0.3.0
 *
 * es6-object-assign:
 *   license: MIT (http://opensource.org/licenses/MIT)
 *   author: Rubén Norte <rubennorte@gmail.com>
 *   maintainers: rubennorte <rubennorte@gmail.com>
 *   homepage: https://github.com/rubennorte/es6-object-assign
 *   version: 1.1.0
 *
 * es6-promise-polyfill:
 *   license: MIT (http://opensource.org/licenses/MIT)
 *   author: Roman Dvornov <rdvornov@gmail.com>
 *   maintainers: lahmatiy <rdvornov@gmail.com>
 *   homepage: https://github.com/lahmatiy/es6-promise-polyfill#readme
 *   version: 1.2.0
 *
 * process:
 *   license: MIT (http://opensource.org/licenses/MIT)
 *   author: Roman Shtylman <shtylman@gmail.com>
 *   maintainers: coolaj86 <coolaj86@gmail.com>, cwmma <calvin.metcalf@gmail.com>, defunctzombie <shtylman@gmail.com>
 *   homepage: https://github.com/shtylman/node-process#readme
 *   version: 0.11.10
 *
 * timers-browserify:
 *   licenses: MIT (http://opensource.org/licenses/MIT)
 *   author: J. Ryan Stinnett <jryans@gmail.com>
 *   maintainers: jryans <jryans@gmail.com>
 *   contributors: Guy Bedford <guybedford@gmail.com>, Ionut-Cristian Florescu <ionut.florescu@gmail.com>, James Halliday <mail@substack.net>, Jan Schär <jscissr@gmail.com>, Johannes Ewald <johannes.ewald@peerigon.com>, Jonathan Prins <jon@blip.tv>, Matt Esch <matt@mattesch.info>
 *   homepage: https://github.com/jryans/timers-browserify
 *   version: 1.4.2
 *
 * This header is generated by licensify (https://github.com/twada/licensify)
 */
!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.LookForward=e()}}(function(){var e;return function(){function e(t,n,o){function r(a,s){if(!n[a]){if(!t[a]){var c="function"==typeof require&&require;if(!s&&c)return c(a,!0);if(i)return i(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var l=n[a]={exports:{}};t[a][0].call(l.exports,function(e){return r(t[a][1][e]||e)},l,l.exports,e,t,n,o)}return n[a].exports}for(var i="function"==typeof require&&require,a=0;a<o.length;a++)r(o[a]);return r}return e}()({1:[function(e,t,n){try{var o=new window.CustomEvent("test");if(o.preventDefault(),!0!==o.defaultPrevented)throw new Error("Could not prevent default")}catch(e){var r=function(e,t){var n,o;return t=t||{bubbles:!1,cancelable:!1,detail:void 0},n=document.createEvent("CustomEvent"),n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),o=n.preventDefault,n.preventDefault=function(){o.call(this);try{Object.defineProperty(this,"defaultPrevented",{get:function(){return!0}})}catch(e){this.defaultPrevented=!0}},n};r.prototype=window.Event.prototype,window.CustomEvent=r}},{}],2:[function(e,t,n){"use strict";function o(e,t){if(void 0===e||null===e)throw new TypeError("Cannot convert first argument to object");for(var n=Object(e),o=1;o<arguments.length;o++){var r=arguments[o];if(void 0!==r&&null!==r)for(var i=Object.keys(Object(r)),a=0,s=i.length;a<s;a++){var c=i[a],u=Object.getOwnPropertyDescriptor(r,c);void 0!==u&&u.enumerable&&(n[c]=r[c])}}return n}function r(){Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:o})}t.exports={assign:o,polyfill:r}},{}],3:[function(t,n,o){(function(t,n){!function(t){function r(e){return"[object Array]"===Object.prototype.toString.call(e)}function i(){for(var e=0;e<S.length;e++)S[e][0](S[e][1]);S=[],b=!1}function a(e,t){S.push([e,t]),b||(b=!0,_(i,0))}function s(e,t){function n(e){l(t,e)}function o(e){f(t,e)}try{e(n,o)}catch(e){o(e)}}function c(e){var t=e.owner,n=t.state_,o=t.data_,r=e[n],i=e.then;if("function"==typeof r){n=k;try{o=r(o)}catch(e){f(i,e)}}u(i,o)||(n===k&&l(i,o),n===T&&f(i,o))}function u(e,t){var n;try{if(e===t)throw new TypeError("A promises callback cannot return that same promise.");if(t&&("function"==typeof t||"object"==typeof t)){var o=t.then;if("function"==typeof o)return o.call(t,function(o){n||(n=!0,t!==o?l(e,o):d(e,o))},function(t){n||(n=!0,f(e,t))}),!0}}catch(t){return n||f(e,t),!0}return!1}function l(e,t){e!==t&&u(e,t)||d(e,t)}function d(e,t){e.state_===g&&(e.state_=L,e.data_=t,a(h,e))}function f(e,t){e.state_===g&&(e.state_=L,e.data_=t,a(v,e))}function p(e){var t=e.then_;e.then_=void 0;for(var n=0;n<t.length;n++)c(t[n])}function h(e){e.state_=k,p(e)}function v(e){e.state_=T,p(e)}function y(e){if("function"!=typeof e)throw new TypeError("Promise constructor takes a function argument");if(this instanceof y==!1)throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");this.then_=[],s(e,this)}var m=t.Promise,w=m&&"resolve"in m&&"reject"in m&&"all"in m&&"race"in m&&function(){var e;return new m(function(t){e=t}),"function"==typeof e}();void 0!==o&&o?(o.Promise=w?m:y,o.Polyfill=y):"function"==typeof e&&e.amd?e(function(){return w?m:y}):w||(t.Promise=y);var b,g="pending",L="sealed",k="fulfilled",T="rejected",E=function(){},_=void 0!==n?n:setTimeout,S=[];y.prototype={constructor:y,state_:g,then_:null,data_:void 0,then:function(e,t){var n={owner:this,then:new this.constructor(E),fulfilled:e,rejected:t};return this.state_===k||this.state_===T?a(c,n):this.then_.push(n),n.then},catch:function(e){return this.then(null,e)}},y.all=function(e){var t=this;if(!r(e))throw new TypeError("You must pass an array to Promise.all().");return new t(function(t,n){for(var o,r=[],i=0,a=0;a<e.length;a++)o=e[a],o&&"function"==typeof o.then?o.then(function(e){return i++,function(n){r[e]=n,--i||t(r)}}(a),n):r[a]=o;i||t(r)})},y.race=function(e){var t=this;if(!r(e))throw new TypeError("You must pass an array to Promise.race().");return new t(function(t,n){for(var o,r=0;r<e.length;r++)o=e[r],o&&"function"==typeof o.then?o.then(t,n):t(o)})},y.resolve=function(e){var t=this;return e&&"object"==typeof e&&e.constructor===t?e:new t(function(t){t(e)})},y.reject=function(e){return new this(function(t,n){n(e)})}}("undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("timers").setImmediate)},{timers:5}],4:[function(e,t,n){function o(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function i(e){if(d===setTimeout)return setTimeout(e,0);if((d===o||!d)&&setTimeout)return d=setTimeout,setTimeout(e,0);try{return d(e,0)}catch(t){try{return d.call(null,e,0)}catch(t){return d.call(this,e,0)}}}function a(e){if(f===clearTimeout)return clearTimeout(e);if((f===r||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(e);try{return f(e)}catch(t){try{return f.call(null,e)}catch(t){return f.call(this,e)}}}function s(){y&&h&&(y=!1,h.length?v=h.concat(v):m=-1,v.length&&c())}function c(){if(!y){var e=i(s);y=!0;for(var t=v.length;t;){for(h=v,v=[];++m<t;)h&&h[m].run();m=-1,t=v.length}h=null,y=!1,a(e)}}function u(e,t){this.fun=e,this.array=t}function l(){}var d,f,p=t.exports={};!function(){try{d="function"==typeof setTimeout?setTimeout:o}catch(e){d=o}try{f="function"==typeof clearTimeout?clearTimeout:r}catch(e){f=r}}();var h,v=[],y=!1,m=-1;p.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];v.push(new u(e,t)),1!==v.length||y||i(c)},u.prototype.run=function(){this.fun.apply(null,this.array)},p.title="browser",p.browser=!0,p.env={},p.argv=[],p.version="",p.versions={},p.on=l,p.addListener=l,p.once=l,p.off=l,p.removeListener=l,p.removeAllListeners=l,p.emit=l,p.prependListener=l,p.prependOnceListener=l,p.listeners=function(e){return[]},p.binding=function(e){throw new Error("process.binding is not supported")},p.cwd=function(){return"/"},p.chdir=function(e){throw new Error("process.chdir is not supported")},p.umask=function(){return 0}},{}],5:[function(e,t,n){(function(t,o){function r(e,t){this._id=e,this._clearFn=t}var i=e("process/browser.js").nextTick,a=Function.prototype.apply,s=Array.prototype.slice,c={},u=0;n.setTimeout=function(){return new r(a.call(setTimeout,window,arguments),clearTimeout)},n.setInterval=function(){return new r(a.call(setInterval,window,arguments),clearInterval)},n.clearTimeout=n.clearInterval=function(e){e.close()},r.prototype.unref=r.prototype.ref=function(){},r.prototype.close=function(){this._clearFn.call(window,this._id)},n.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},n.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},n._unrefActive=n.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},n.setImmediate="function"==typeof t?t:function(e){var t=u++,o=!(arguments.length<2)&&s.call(arguments,1);return c[t]=!0,i(function(){c[t]&&(o?e.apply(null,o):e.call(null),n.clearImmediate(t))}),t},n.clearImmediate="function"==typeof o?o:function(e){delete c[e]}}).call(this,e("timers").setImmediate,e("timers").clearImmediate)},{"process/browser.js":4,timers:5}],6:[function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();e("custom-event-polyfill");var i=e("../lib/util"),a=e("es6-object-assign").assign,s=e("es6-promise-polyfill").Promise,c={classNames:{LookForward:"lookforward",LookForwardBody:"lookforward-body",LookForwardInner:"lookforward-inner",LookForwardClose:"lookforward-close",LookForwardCloseBtn:"lookforward-close-btn",LookForwardHeader:"lookforward-header",LookForwardFooter:"lookforward-footer",LookForwardLoader:"lookforward-loader",LookForwardLoaderWrap:"lookforward-loader-wrap"},closeBtnClass:"js-lookforward-close-btn",closeBtnPattern:1,transitionEnter:"",transitionLeave:"",scrapedArea:"body",useHistoryApi:!0,execInnerScript:!1,footerHtml:"",headerHtml:""},u=function(){function e(t){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o(this,e),this.options=a({},c,r),this.id=(0,i.getUniqId)();var s="string"==typeof t?document.querySelectorAll(t):t,u=document.querySelector("body");this.currentUrl=location.href,this.selector=t,this.historyLength=0,s&&([].forEach.call(s,function(e){n.addClickEvent(e)}),(0,i.append)(u,'<div id="'+this.id+'"></div>'),window.history&&this.options.useHistoryApi&&window.addEventListener("popstate",function(e){var t=e.state;if(t&&t.pushed){var o=t.transitionEnter,r=t.transitionLeave,a=(0,i.getUniqId)(),s=n.buildHtml(t.html,a,o,r);if(n.historyLength>=t.historyLength)n.removeModal();else{var c=n.addModal(s);n.options.execInnerScript&&n.execInnerScript(c)}n.historyLength=t.historyLength}else n.removeModal().then(function(){u.style.overflow="",n._fireEvent("closeAll")})}))}return r(e,[{key:"on",value:function(e,t){var n=this;document.querySelector("#"+this.id).addEventListener(e,function(e){t.call(n,e)})}},{key:"addClickEvent",value:function(e){var t=this;e.addEventListener("click",function(n){n.preventDefault();var o=e.getAttribute("href"),r=e.dataset.transitionEnter||t.options.transitionEnter,a=e.dataset.transitionLeave||t.options.transitionLeave;t.addLoader(),(0,i.fetch)(o).then(function(e){t.removeLoader();var n=e.querySelector(t.options.scrapedArea);if(n){var s=(0,i.getUniqId)(),c=t.buildHtml(n.innerHTML,s,r,a),u=t.addModal(c);if(t.options.execInnerScript&&t.execInnerScript(u),window.history&&t.options.useHistoryApi){var l=t.historyLength;window.history.pushState({pushed:!0,html:n.innerHTML,id:s,transitionEnter:r,transitionLeave:a,historyLength:l},"",o)}}})})}},{key:"execInnerScript",value:function(e){var t=e.querySelectorAll("script");[].forEach.call(t,function(t){for(var n=document.createElement("script"),o=t.attributes,r=0,i=o.length;r<i;r+=1){var a=o[r];n.setAttribute(a.name,a.value)}n.innerHTML=t.innerHTML,e.appendChild(n)})}},{key:"addLoader",value:function(){var e=this.id,t=this.options.classNames,n=document.querySelector("#"+e),o='<div class="'+t.LookForwardLoaderWrap+'" data-id="loader">\n      <span class="'+t.LookForwardLoader+'"></span>\n    </div>';(0,i.append)(n,o)}},{key:"removeLoader",value:function(){var e=this.id,t=document.querySelector("#"+e),n=t.querySelector('[data-id="loader"]');(0,i.remove)(n)}},{key:"addModal",value:function(e){var t=this,n=this.id,o=this.selector,r=document.querySelector("body"),a=document.querySelector("#"+n);r.style.overflow="hidden",(0,i.append)(a,e);var s=this.getModal(),c=s.querySelectorAll("."+this.options.closeBtnClass);if(this.historyLength+=1,[].forEach.call(c,function(e){e.addEventListener("click",function(e){e.preventDefault(),window.history&&t.options.useHistoryApi?window.history.back():t.removeModal()})}),"string"==typeof o){var u=s.querySelectorAll(o);[].forEach.call(u,function(e){t.addClickEvent(e)})}return this._fireEvent("open"),s}},{key:"getModals",value:function(){return document.querySelectorAll("#"+this.id+" [data-root]")}},{key:"getModal",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"last";return document.querySelector("#"+this.id+" [data-root]:"+e+"-child")}},{key:"removeModal",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"last";return new s(function(n){var o=e.options.classNames,r=document.querySelector("#"+e.id+" [data-root]:"+t+"-child");r||n(),(0,i.addClass)(r,o.LookForwardClose),e.historyLength-=1,setTimeout(function(){(0,i.remove)(r),e._fireEvent("close"),n()},300)})}},{key:"buildHtml",value:function(e,t,n,o){var r=this.options.classNames,i=this.options.closeBtnPattern,a=this.options.closeBtnClass,s=this.options,c=s.headerHtml,u=s.footerHtml;return'\n      <div class="'+r.LookForward+'" data-root data-animation id="'+t+'">\n        <button class="'+r.LookForwardCloseBtn+" _pattern"+i+" "+a+'"></button>\n        <div class="'+r.LookForwardBody+'" data-body>\n          <div class="'+r.LookForwardHeader+'">\n          '+c+'\n          </div>\n          <div class="'+r.LookForwardInner+" _enter-"+n+" _leave-"+o+'">\n            '+e+'\n          </div>\n          <div class="'+r.LookForwardFooter+'">\n          '+u+"\n          </div>\n        </div>\n      </div>\n    "}},{key:"_fireEvent",value:function(e){var t=document.querySelector("#"+this.id);(0,i.triggerEvent)(t,e)}}]),e}();n.default=u,t.exports=n.default},{"../lib/util":8,"custom-event-polyfill":1,"es6-object-assign":2,"es6-promise-polyfill":3}],7:[function(e,t,n){"use strict";t.exports=e("./core/")},{"./core/":6}],8:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=e("es6-promise-polyfill").Promise;n.fetch=function(e){return new o(function(t,n){var o=new XMLHttpRequest;o.onload=function(){t(o.response)},o.onerror=function(){n()},o.open("GET",e),o.responseType="document",o.send()})},n.append=function(e,t){var n=new DOMParser,o=n.parseFromString(t,"text/html");e.appendChild(o.querySelector("body").childNodes[0])},n.prepend=function(e,t){var n=new DOMParser,o=n.parseFromString(t,"text/html");e.insertBefore(o.querySelector("body").childNodes[0],e.firstChild)},n.getUniqId=function(){return(Date.now().toString(36)+Math.random().toString(36).substr(2,5)).toUpperCase()},n.remove=function(e){e&&e.parentNode&&e.parentNode.removeChild(e)},n.addClass=function(e,t){e.classList?e.classList.add(t):e.className+=" "+t},n.triggerEvent=function(e,t,n){var o=void 0;window.CustomEvent?o=new CustomEvent(t,{cancelable:!0}):(o=document.createEvent("CustomEvent"),o.initCustomEvent(t,!1,!1,n)),e.dispatchEvent(o)}},{"es6-promise-polyfill":3}]},{},[7])(7)});